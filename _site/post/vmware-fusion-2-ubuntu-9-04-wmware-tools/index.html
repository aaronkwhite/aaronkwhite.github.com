


<!doctype html>
<html lang="en">
  <head>
    <title>VMware Fusion 2, Ubuntu 9.04 & WMware Tools - </title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
    <link href="../../fonts/ss-social-regular.css" rel="stylesheet" />
    <link href="../../fonts/ss-pika.css" rel="stylesheet" />
    <link rel="canonical" href="/post/vmware-fusion-2-ubuntu-9-04-wmware-tools/" />
    <link rel="stylesheet" href="../../stylesheets/main.css" />

    <script src="../../javascripts/custom.modernizr.js"></script>
  </head>

  <body>

    <header>
      <div class="row">

        <div class="large-4 columns site-title">
          <a href="">aaron k. white</a>
        </div>

        <div class="large-8 columns site-nav">
          <ul class="inline-list">
            <li><a href="/about" class="ss-businessuser"></a></li>
            <li><a href="/portfolio" class="ss-pen"></a></li>
            <li><a href="http://homelandpodcast.com" class="ss-mic"></a></li>
            <li><a href="/blog" class="ss-rss"></a></li>
          </ul>
        </div>
      
      </div><!-- /row -->
    </header>


<section id="post-title">
  <div class="row">
    <div class="large-12 columns">
      <h2>VMware Fusion 2, Ubuntu 9.04 & WMware Tools</h2>
      <p>
        <span class="ss-calendar"></span> June 30, 2009
      </p>
    </div>
  </div><!-- /row -->
</section>


<section id="post">

  <div class="row">
    <div class="large-12 columns post_share">
      <a href="https://twitter.com/intent/tweet?source=webclient&text=VMware Fusion 2, Ubuntu 9.04 & WMware Tools&via=aaronkwhite&url=http://aaronkwhite.com/post/vmware-fusion-2-ubuntu-9-04-wmware-tools/">
        <span class="icon ss-social-regular ss-twitter"></span>
      </a>
    </div>
  </div><!-- /row -->

  <div class="row">
    <div class="large-12 columns">
        
        <h1></h1>

<p>UPDATE 08/25/2009: I reloaded my Macbook Pro this weekend and install the latest VMWare (Version 2.0.5 (173382)) and did not have to make the below change to the page.c file… it seems VMWare has fixed this issue.</p>

<p>I received a Tweet the other day about how the use of <a href="http://www.internetnews.com/dev-news/article.php/3826466">Ruby in the US has exploded</a>. I’ve never used Ruby, but I’ve read that it was created in order to make programming easy, well at least easier compared to other languages.  Personally  I’ve noticed a handful of more jobs requiring Ruby on Rails.  So I figured I would setup a new webserver in VMware Fusion, install Ruby &amp; Rails to see if it really is easier to work with.</p>

<p>Now on to the technical gab…</p>

<p>I use fusion everyday for my Fedora environment (Work Related) and Windoze… don’t worry I wont even go there.  So downloading Ubuntu Server 9.04 and installing a new environment was a snap.  Ubuntu is my favorite distro, I love the community support, rapid release cycle and apt-get!  Here’s where it gets interesting.  In order to view my updates in my fedora VM I have to rsync everything over which gets to become a HUGE pain after 10-12 times (and yes I have a shell script to do the dirty work), so I wanted to use the shared folders functionality which requires VMware Tools, so I only need to refresh my browser.  VMware DOES NOT SUPPORT UBUNTU SERVER 9.04  OH NO!  WHAT EVERY WILL I DO?  So this sux, but as every linux enthusiast knows… is not the end of the world, there is a way!</p>

<p>Couple things before we get started, this is done via Command Line ONLY!  This is a web server and I don’t need it to take up 12Gbs on my Mac, so we don’t need/want Gnome installed which is the default for Ubuntu Server.  If you are not comfortable with the command line, please stop here and speak with your family physician before proceeding… it’s not that difficult, but you will need to know Vi Editor.</p>

<p>So after you setup your VM, update the system, install build essentials and reboot (always a good idea).  Next we will need to install the Kernel Headers</p>

<p>Make sure you have updated version</p>

<p>$ sudo apt-get update</p>

<p>Search for kernel version (optional)</p>

<p>$ apt-cache search linux-headers-$(uname -r)</p>

<p>Install linux-header package</p>

<p>$ sudo apt-get install linux-headers-$(uname -r)</p>

<p>Make sure you have updated version</p>

<pre><code>$ sudo apt-get update
</code></pre>

<p>Search for kernel version (optional)</p>

<pre><code>$ apt-cache search linux-headers-$(uname -r)
</code></pre>

<p>Install linux-header package</p>

<pre><code>$ sudo apt-get install linux-headers-$(uname -r)
</code></pre>

<p>Now within Fusion, click Virtual Machine > Install VMware Tools.  This will load the virtual disk that has the tools package.  Locate the package and copy it to the /tmp directory and unpack the tools package</p>

<pre><code>cd /media/cdrom

cp /media/cdrom/VMwareTools-1.0.3-44356.tar.gz /tmp/

cd /tmp

tar xvfz VMwareTools-1.0.3-44356.tar.gz
</code></pre>

<p>Next switch to the folder with the unpacked files and execute the installer:</p>

<pre><code>cd vmware-tools-distrib/

***NOTE: The following patch step is obsolete for Version 2.0.5 (173382) and later***
</code></pre>

<p>Now we need to patch the tools installation.  Change directory to /tmp/vmware-t0ols-distrib/lib/modules/source and locate the page.c file (this is were Vi Editor comes into play, although I guess you could install Gnome and use a graphical editor to make these changes).</p>

<p>First we will need to expand the vmhgfs.tar package</p>

<pre><code> untar vmhgfs.tar
</code></pre>

<p>cd vmhgfs-only</p>

<p>Now Vi into page.c, search for the following line:</p>

<pre><code>find page = __grab_cache_page(mapping, index);
</code></pre>

<p>and replace it with:</p>

<pre><code>page = grab_cache_page_write_begin(mapping, index, flags);
</code></pre>

<p>Save the file and re-tar the vmhgfs-only directory</p>

<pre><code>tar cvf vmhgfs.tar vmhgfs-only
</code></pre>

<p>Now go back to the directory where the VMware Tools installer is located,</p>

<pre><code>cd /tmp/vmware-tools-distrib/
</code></pre>

<p>and run the installer as Sudo</p>

<pre><code>sudo ./vmware-install.pl
</code></pre>

<p>Now the installer will ask a bunch of questions, answer yes (default) to all questions and no to the experimental question.  You will then need to verify that vmhgfs is running:</p>

<pre><code>lsmod | grep vmhgfs
</code></pre>

<p>If you get nothing then the mdoule is not loaded. You will need to load it with this command:</p>

<pre><code>modprobe vmhgfs
</code></pre>

<p>Locate your shared folders</p>

<pre><code>cd /mnt/hgfs
</code></pre>

<p>Enjoy! You have successfully installed VMware Tools on your Ubuntu Server 9.04 web server.  This information was compiled from about 8 different sources which took me about 6 hours to locate and get up and running, this should help out most users in a fraction of that time.  If you run into any issues I suggest you scour Google &amp; the Ubuntu Community Forum, If you leave a comment I will try to assist the best I can.  Good Luck!</p>

<p>-Big A</p>


    </div>
  </div><!-- /row -->

</section>

  
  <footer>
    <div class="row">
        <div class="large-6 columns">
          <p>Really Tall... Really Amazing!</p>
        </div><!-- /four-two -->

        <div class="large-6 columns">
          <p class="copy">Copyright 2008-2013 - Aaron K. White - All Rights Reserved</p>
        </div><!-- /four-two -->

      </div><!-- /row -->
  </footer>





    
  <script src="../../javascripts/jquery-1.9.1.min.js"></script>

  <script type="text/javascript" src="//use.typekit.net/ifh6zvt.js"></script>
  <script type="text/javascript">try{Typekit.load();}catch(e){}</script>

  <script type="text/javascript" src="//platform.twitter.com/widgets.js"></script>
  <script type="text/javascript" src="../../javascripts/hw-parallax.min.js"></script>
  <script>
    $('.parallax').parallax({
      scroll_factor: 0.5
    });
  </script>
  <script src="../../javascripts/scripts.js"></script>





  </body>
</html>